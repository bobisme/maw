{"id":"bd-10a","title":"Add 'maw ws finalize' to automate clean push workflow","description":"Add a command that automates the full 'merge and push' workflow, handling empty commits automatically.\n\nWhat it does:\n1. Check for empty commits in ancestry of current commit\n2. If found, rebase current commit onto main@origin (or specified base)\n3. Move bookmark to current commit\n4. Push to remote\n\nUsage:\n  maw ws finalize               # Uses main@origin as base\n  maw ws finalize --base trunk  # Custom base\n  maw ws finalize --dry-run     # Show what would happen\n\nAlternative names to consider:\n- maw ws clean-push\n- maw ws publish\n- maw ws release\n\nThis eliminates the manual steps: check for empty commits, rebase, move bookmark, push. It's the natural final step after 'maw ws merge'.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-28T20:21:18.358775642Z","created_by":"bob","updated_at":"2026-01-28T20:31:46.049404454Z","closed_at":"2026-01-28T20:31:46.049374768Z","close_reason":"Over-engineering. Combines too many steps with varying semantics (rebase is situational). The blessed path is: merge warns about problems, docs explain the fix, agent follows documented steps.","source_repo":".","compaction_level":0,"original_size":0,"labels":["agent-ux","cli"]}
{"id":"bd-11w","title":"TUI: Workspaces panel","description":"List workspaces from jj workspace list. Show name, change ID, description. Indicators for current (@), stale, conflict.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-24T17:32:19.960370147Z","created_by":"bob","updated_at":"2026-01-24T18:31:58.694987222Z","closed_at":"2026-01-24T18:31:58.694966693Z","close_reason":"Completed workspaces panel with stale detection and improved parsing","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-11w","depends_on_id":"bd-328","type":"blocks","created_at":"2026-01-24T17:32:29.803059899Z","created_by":"bob","metadata":"{}","thread_id":""}]}
{"id":"bd-16f","title":"Implement workspace create command","description":"maw workspace create <name> - replaces shell script functionality, creates .workspaces/<name> with jj workspace add","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-24T16:04:25.526886732Z","created_by":"bob","updated_at":"2026-01-24T16:06:37.815438015Z","closed_at":"2026-01-24T16:06:37.815418619Z","close_reason":"Implemented in initial scaffold","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-16f","depends_on_id":"bd-3ng","type":"blocks","created_at":"2026-01-24T16:04:32.799909629Z","created_by":"bob","metadata":"{}","thread_id":""}]}
{"id":"bd-1b1","title":"Improve error messages with actionable suggestions","description":"Errors like 'jj workspace add failed' don't help. Include stderr from jj, suggest fixes.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-24T16:28:50.914277486Z","created_by":"bob","updated_at":"2026-01-24T16:32:26.103281656Z","closed_at":"2026-01-24T16:32:26.103265656Z","close_reason":"Deferring - will add if needed through real use","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1b3","title":"Detect empty/undescribed commits after merge","description":"After maw ws merge creates the merge commit, check for empty or undescribed commits in the ancestry between main@origin and the merge. If found, warn immediately with the exact fix command (jj rebase). This shifts detection from push-time (confusing jj error) to merge-time (actionable maw warning).","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-28T20:32:00.800872884Z","created_by":"bob","updated_at":"2026-01-28T20:43:35.345815134Z","closed_at":"2026-01-28T20:43:35.345792291Z","close_reason":"v0.4.0: merge now detects undescribed commits and warns with fix commands. Agent template updated with push blocker guidance.","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1cj","title":"Add maw doctor command","description":"Check for required tools (jj, optionally botbus, beads) and give helpful output about what's missing or misconfigured","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-24T16:34:58.688282631Z","created_by":"bob","updated_at":"2026-01-24T16:36:13.484310601Z","closed_at":"2026-01-24T16:36:13.484289622Z","close_reason":"Added doctor command checking jj, botbus, beads, and repo status","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1cp","title":"Add repo-understanding commands to agent instructions","description":"Add an 'Understanding the Repo' section to the maw_instructions() template in agents.rs with 'jj log' and 'jj log -r working_copies()'. Without these, agents are blind to the commit graph and what other agents are doing.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-28T16:56:46.754998054Z","created_by":"bob","updated_at":"2026-01-28T16:57:35.775281575Z","closed_at":"2026-01-28T16:57:35.775253823Z","close_reason":"Added Session Start section and jj log commands to agent instructions template in agents.rs","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1eb","title":"Don't destroy workspaces on merge conflict","description":"maw ws merge --all --destroy will delete workspaces even when merge has conflicts, potentially losing work.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-24T16:28:47.069846799Z","created_by":"bob","updated_at":"2026-01-24T16:30:09.556566661Z","closed_at":"2026-01-24T16:30:09.556536384Z","close_reason":"Merge now refuses to destroy workspaces when conflicts are detected","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1jy","title":"TUI: Details panel","description":"Context-sensitive detail view. Show workspace info, commit details, or issue details based on selection.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T17:32:21.769028708Z","created_by":"bob","updated_at":"2026-01-24T18:31:57.459437629Z","closed_at":"2026-01-24T18:31:57.459419275Z","close_reason":"Implemented context-sensitive details panel with file changes display","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-1jy","depends_on_id":"bd-328","type":"blocks","created_at":"2026-01-24T17:32:30.021569376Z","created_by":"bob","metadata":"{}","thread_id":""}]}
{"id":"bd-1lt","title":"TUI: Workspace actions (create/destroy/sync/merge)","description":"Implement c/d/s/m/M keybindings. Create and destroy popups with confirmation. Merge popup with workspace selection.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-24T17:32:24.397239136Z","created_by":"bob","updated_at":"2026-01-24T18:35:23.082597099Z","closed_at":"2026-01-24T18:35:23.082573294Z","close_reason":"Implemented workspace actions (create/destroy/sync/merge) with popups and terminal editing shortcuts","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-1lt","depends_on_id":"bd-11w","type":"blocks","created_at":"2026-01-24T17:32:30.238313896Z","created_by":"bob","metadata":"{}","thread_id":""}]}
{"id":"bd-1op","title":"Implement workspace destroy command","description":"maw workspace destroy <name> - jj workspace forget + rm -rf","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T16:04:26.329493560Z","created_by":"bob","updated_at":"2026-01-24T16:06:37.821788637Z","closed_at":"2026-01-24T16:06:37.821762969Z","close_reason":"Implemented in initial scaffold","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-1op","depends_on_id":"bd-3ng","type":"blocks","created_at":"2026-01-24T16:04:32.865683342Z","created_by":"bob","metadata":"{}","thread_id":""}]}
{"id":"bd-1wu","title":"clean up README","description":"remove open questions, test notes. make sure it's up-to-date","status":"closed","priority":2,"issue_type":"chore","created_at":"2026-01-24T16:37:49.754606767Z","created_by":"bob","updated_at":"2026-01-24T16:39:09.812523201Z","closed_at":"2026-01-24T16:39:09.812498885Z","close_reason":"Rewrote README with current commands, removed outdated content","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1x1","title":"Update 'maw agents show' with push workflow guidance","description":"The current 'Pushing to Remote' section in maw agents show is incomplete and doesn't mention the empty commit issue.\n\nReplace it with:\n- Instructions to check for empty commits before push\n- Steps to rebase merge commits onto main@origin to clean ancestry\n- Alternative approach of rebasing feature branches before merging\n- Explanation of why MAW creates empty setup commits and why they block push\n\nReal-world problem: After merging workspaces, 'jj git push' fails with 'Won't push commit X since it has no description'. Agents need clear guidance on handling this.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-28T20:21:01.438718248Z","created_by":"bob","updated_at":"2026-01-28T20:43:35.359101675Z","closed_at":"2026-01-28T20:43:35.359077219Z","close_reason":"v0.4.0: merge now detects undescribed commits and warns with fix commands. Agent template updated with push blocker guidance.","source_repo":".","compaction_level":0,"original_size":0,"labels":["agent-ux","docs"]}
{"id":"bd-25h","title":"Doctor should require .workspaces in .gitignore","description":"maw doctor should check that .workspaces/ (or :/.workspaces) is in .gitignore and warn if not. Without this, workspace directories could accidentally be committed.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-28T21:16:30.994794139Z","created_by":"bob","updated_at":"2026-01-28T21:22:21.366868450Z","closed_at":"2026-01-28T21:22:21.366852129Z","close_reason":"v0.5.0: init command, doctor gitignore check, default workspace protection","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-28w","title":"TUI: Issues panel (optional)","description":"Show beads issues if .beads/ exists. Priority and status indicators. Hide if beads not configured.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-24T17:32:22.787016927Z","created_by":"bob","updated_at":"2026-01-24T18:38:16.230565827Z","closed_at":"2026-01-24T18:38:16.230539578Z","close_reason":"Implemented issues panel with beads integration, priority colors, and status indicators","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-28w","depends_on_id":"bd-328","type":"blocks","created_at":"2026-01-24T17:32:30.129477296Z","created_by":"bob","metadata":"{}","thread_id":""}]}
{"id":"bd-290","title":"TUI: Use green instead of cyan for focused panel","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-24T18:59:07.753126406Z","created_by":"bob","updated_at":"2026-01-24T19:04:11.802202959Z","closed_at":"2026-01-24T19:04:11.802182140Z","close_reason":"Changed FOCUSED color from Cyan to Green in theme.rs","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-29k","title":"Update README.md workspace paths","description":"Change ../maw-alice to .workspaces/alice in Quick Start section","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T15:49:01.036036232Z","created_by":"bob","updated_at":"2026-01-24T15:56:02.620952344Z","closed_at":"2026-01-24T15:56:02.620930803Z","close_reason":"Updated paths to use .workspaces/","source_repo":".","compaction_level":0,"original_size":0,"labels":["docs"]}
{"id":"bd-2dj","title":"Add session-start section to agent instructions","description":"Add a 'Session Start' section to the maw_instructions() template in agents.rs advising agents to always run 'maw ws sync' and 'maw ws status' at the beginning of a session. Autonomous agents need explicit guidance to check their environment before editing.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-28T16:56:46.378534524Z","created_by":"bob","updated_at":"2026-01-28T16:57:35.760555520Z","closed_at":"2026-01-28T16:57:35.760531445Z","close_reason":"Added Session Start section and jj log commands to agent instructions template in agents.rs","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-2dx","title":"add `ws create --random`","description":"Passing --random should skip the need for <name> and use a random name.\nNames can be generated by the `names` crate (see ~/src/botbus).\nNames should be kebab-case.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-29T22:38:57.804589023Z","created_by":"bob","updated_at":"2026-01-29T22:42:20.182342263Z","closed_at":"2026-01-29T22:42:20.182305985Z","close_reason":"v0.6.0: maw ws create --random generates kebab-case workspace names","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-2e1","title":"Prevent divergent commits by creating dedicated commit on workspace create","description":"Change maw ws create to auto-create a new commit owned by the agent, preventing divergent commits when multiple agents work concurrently.","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-24T22:23:17.459077822Z","created_by":"bob","updated_at":"2026-01-24T22:25:59.230237586Z","closed_at":"2026-01-24T22:25:59.230219792Z","close_reason":"Implemented: maw ws create now auto-creates dedicated commit for each agent","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-2e4","title":"Add maw ws jj subcommand for sandboxed agents","description":"Agents running under Claude Code's sandbox can't persist cd or env vars between Bash calls. Every jj command in a workspace requires 'cd .workspaces/name && jj ...' which is fragile and hard for sandboxes to inspect.\n\nAdd 'maw ws jj <workspace> <args...>' that runs jj with -R pointing at the workspace directory. Only proxies jj ‚Äî no arbitrary command execution. This avoids security concerns with a general exec wrapper while solving the real pain point.\n\nExample: maw ws jj alice diff, maw ws jj alice log, maw ws jj alice describe -m 'feat: ...'\n\nRejected alternatives:\n- maw ws exec (arbitrary execution, sandbox-opaque)\n- maw ws env (env vars don't persist in Claude Code sandbox)\n- Better docs (structural friction, not a docs gap)","status":"closed","priority":2,"issue_type":"enhancement","created_at":"2026-01-28T18:40:29.453816755Z","created_by":"bob","updated_at":"2026-01-28T19:26:57.550298764Z","closed_at":"2026-01-28T19:26:57.550270742Z","close_reason":"Added maw ws jj subcommand in v0.3.0. Proxies jj into workspace directory without arbitrary exec.","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-2f6","title":"Update AGENTS.md to be consistent","description":"AGENTS.md references old shell script and botbus. Should use maw commands throughout. Remove/update outdated sections.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-24T16:28:48.469562849Z","created_by":"bob","updated_at":"2026-01-24T16:30:57.522558987Z","closed_at":"2026-01-24T16:30:57.522540753Z","close_reason":"Rewrote AGENTS.md to use maw commands, removed deprecated shell script","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-2gc","title":"Remove unused thiserror dependency","description":"thiserror is declared but never used - all error handling uses anyhow","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-24T16:28:45.942471319Z","created_by":"bob","updated_at":"2026-01-24T16:30:09.746229105Z","closed_at":"2026-01-24T16:30:09.746206943Z","close_reason":"Removed unused thiserror dependency","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-2ia","title":"TUI: Add status bar with key legend","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T18:59:09.214001510Z","created_by":"bob","updated_at":"2026-01-24T19:04:13.736459195Z","closed_at":"2026-01-24T19:04:13.736441442Z","close_reason":"Added lazygit-style status bar with context-sensitive key hints","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-2kd","title":"MAW multi-agent experiment report - botbus inbox features","description":"## MAW Multi-Agent Experiment - Final Report\n\n### Context\nCoordinated 3 parallel agents (wild-warden, electric-junction, iron-bear) working on botbus inbox enhancements using MAW workspaces.\n\n### ‚úÖ What Worked Well\n\n**1. Parallel Execution**\n- All 3 agents completed work concurrently without blocking\n- Time savings: ~7 minutes vs ~20 minutes sequential (~65% faster)\n- No file-locking or coordination problems\n\n**2. Workspace Isolation**\n- Independent work in jj workspaces\n- No interference during development\n- Local testing without affecting main repo\n\n**3. Agent Communication**\n- Successful botbus coordination\n- Proper agent identities maintained\n- Visible progress in central channel\n\n**4. Code Quality**\n- wild-warden: 202 lines (subscription tracking + tests)\n- electric-junction: 218 lines (DM detection + multi-channel)\n- iron-bear: 171 lines (mention detection + hyphen fix)\n- All 113 tests passed after merge\n\n**5. Merge Process**\n- Proper 3-way merge created\n- Clear conflict markers\n- Manageable conflicts (2 files, 4 regions)\n\n### ‚ö†Ô∏è Challenges\n\n**1. Conflict Resolution**\n- Required manual intervention (src/cli/inbox.rs, src/main.rs)\n- Both agents modified same file extensively\n- Conflict markers needed cleanup\n\n**2. Agent Instructions**\n- Required very explicit workspace path instructions\n- Repeated emphasis on export BOTBUS_AGENT needed\n- Workspace navigation not intuitive\n\n**3. Review Process**\n- Difficult to view diffs before merge\n- Non-obvious syntax: jj diff -r <workspace>@\n- No built-in iteration mechanism\n\n**4. Bead Management**\n- Beads updated in workspaces\n- Manual sync needed after merge\n\n### üìä Metrics\n- Features: 3 major\n- Lines: ~600 total\n- Tests: 113 passing (3 new)\n- Conflicts: 4 regions, 2 files\n- Time: 65% faster than sequential\n\n### üéØ Recommendations\n\n**Use MAW for:**\n- Independent features touching different files\n- Experiments with multiple approaches\n- Fast parallel development\n\n**Skip MAW for:**\n- Sequential dependent features\n- Single-file refactors (conflict-prone)\n- Quick fixes\n\n### Final Verdict\nSuccess! MAW worked as intended. Conflicts were manageable. Would use again for independent features.","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-28T18:40:00.089415974Z","created_by":"bob","updated_at":"2026-01-28T18:57:30.511437865Z","closed_at":"2026-01-28T18:57:30.511404342Z","close_reason":"Informational experiment report ‚Äî good data, no action needed","source_repo":".","compaction_level":0,"original_size":0,"labels":["experiment","feedback","multi-agent"]}
{"id":"bd-2pq","title":"Implement maw ws status command","description":"Single command showing: workspace stale status, other agent work, conflicts, merge state. Consolidates jj status + jj log --all into agent-focused view.","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-24T16:12:03.755969438Z","created_by":"bob","updated_at":"2026-01-24T16:14:16.153792800Z","closed_at":"2026-01-24T16:14:16.153771731Z","close_reason":"Implemented status command showing workspace state, agent work, and conflicts","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-2qs","title":"Implement maw ws merge command","description":"Simplify merging agent work: maw ws merge alice bob carol - creates merge commit from specified workspaces. Could also support --all to merge everything.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-24T16:12:05.842150002Z","created_by":"bob","updated_at":"2026-01-24T16:22:46.438444273Z","closed_at":"2026-01-24T16:22:46.438425248Z","close_reason":"Implemented merge command with --all and --destroy options","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-2qy","title":"Fix ws create to branch from @ instead of main","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T14:09:47.873190211Z","created_by":"bob","updated_at":"2026-01-25T14:10:48.604691573Z","closed_at":"2026-01-25T14:10:48.604657289Z","close_reason":"Done: changed default from main to @","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-2to","title":"ws create should branch from current working copy, not main","description":"When creating a new workspace with 'maw ws create', the workspace branches from the 'main' bookmark instead of the current working copy (@).\n\nThis causes issues when the orchestrator has uncommitted work that subagents need access to. The workaround is to manually rebase the workspace after creation:\n\n```bash\ncd .workspaces/agent-foo\njj rebase -d <current-change-id>\n```\n\n**Expected behavior:** 'maw ws create foo' should create a workspace branching from @ (current working copy), so agents immediately see the latest state.\n\n**Current behavior:** Workspaces branch from main, requiring manual rebase.\n\n**Discovered in:** botcrit multi-agent coordination experiment","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-25T14:01:02.259011058Z","created_by":"bob","updated_at":"2026-01-25T14:10:43.773274947Z","closed_at":"2026-01-25T14:10:43.773256863Z","close_reason":"Fixed: ws create now branches from @ (current working copy) instead of main","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-2uu","title":"TUI: Use rounded corners for panels","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-24T18:59:07.009211687Z","created_by":"bob","updated_at":"2026-01-24T19:04:10.876300183Z","closed_at":"2026-01-24T19:04:10.876279885Z","close_reason":"Implemented rounded corners using BorderType::Rounded","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-31p","title":"Add conflict visualization before merge","description":"jj already supports this via 'jj diff -r agent@', but the syntax is non-obvious. Two options: (1) just document 'jj diff -r <name>@' in agent instructions, or (2) add thin wrapper 'maw ws diff <name>' for discoverability. Leaning toward option 2 ‚Äî low effort, high value for agents who don't know jj workspace syntax.","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-28T18:40:23.935904529Z","created_by":"bob","updated_at":"2026-01-28T20:46:02.660740410Z","closed_at":"2026-01-28T20:46:02.660714822Z","close_reason":"Solved by maw ws jj (v0.3.0). Agents can run 'maw ws jj alice diff' and 'maw ws jj alice status' without knowing jj workspace@ syntax. Cross-workspace conflict preview would require jj features that don't exist yet.","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-328","title":"TUI: Basic scaffold and app loop","description":"Set up ratatui, crossterm, tokio. Create basic app loop with quit handling. Empty panels layout.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-24T17:32:18.761060328Z","created_by":"bob","updated_at":"2026-01-24T18:25:44.174371139Z","closed_at":"2026-01-24T18:25:44.174353747Z","close_reason":"Basic scaffold complete: ratatui setup, app loop, workspaces panel rendering, theme, navigation keys","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-32m","title":"Add comprehensive --help with examples","description":"Detailed help text explaining multi-agent workflow, examples for each command","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T16:04:28.437114166Z","created_by":"bob","updated_at":"2026-01-24T16:07:03.247103326Z","closed_at":"2026-01-24T16:07:03.247077898Z","close_reason":"Added detailed quick start and workflow sections to --help","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-32m","depends_on_id":"bd-3ng","type":"blocks","created_at":"2026-01-24T16:04:32.987642528Z","created_by":"bob","metadata":"{}","thread_id":""}]}
{"id":"bd-345","title":"Add --json flag to list and status commands","description":"Agents need machine-readable output. Add --json to: maw ws list, maw ws status","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-24T16:28:49.631847548Z","created_by":"bob","updated_at":"2026-01-24T16:32:26.097418140Z","closed_at":"2026-01-24T16:32:26.097397331Z","close_reason":"Deferring - will add if needed through real use","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-346","title":"ws destroy should not require interactive confirmation","description":"'maw ws destroy <name>' prompts for confirmation, which doesn't work well in automated/scripted contexts.\n\n```bash\nmaw ws destroy agent-toon\n# About to destroy workspace 'agent-toon'...\n# Continue? [y/N] Aborted.\n```\n\nCurrent workaround: `echo 'y' | maw ws destroy agent-toon`\n\n**Suggestion:** Add a '--force' or '-y' flag to skip confirmation:\n```bash\nmaw ws destroy agent-toon --force\n```\n\n**Discovered in:** botcrit multi-agent coordination experiment","status":"closed","priority":3,"issue_type":"bug","created_at":"2026-01-25T14:01:16.122247324Z","created_by":"bob","updated_at":"2026-01-25T14:10:44.824810068Z","closed_at":"2026-01-25T14:10:44.824792635Z","close_reason":"Already implemented: use 'maw ws destroy <name> --force' to skip confirmation. Updated AGENTS.md to document this.","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-35v","title":"Test full multi-agent workflow","description":"Create 2-3 agent workspaces, have them make concurrent changes, verify jj handles merges correctly","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-24T15:49:02.670613130Z","created_by":"bob","updated_at":"2026-01-24T15:57:50.531853483Z","closed_at":"2026-01-24T15:57:50.531829799Z","close_reason":"Tested: workspace creation, concurrent edits, conflict detection and resolution all working","source_repo":".","compaction_level":0,"original_size":0,"labels":["testing"],"dependencies":[{"issue_id":"bd-35v","depends_on_id":"bd-399","type":"blocks","created_at":"2026-01-24T15:49:22.885598105Z","created_by":"bob","metadata":"{}","thread_id":""},{"issue_id":"bd-35v","depends_on_id":"bd-3iu","type":"blocks","created_at":"2026-01-24T15:49:22.835134309Z","created_by":"bob","metadata":"{}","thread_id":""}]}
{"id":"bd-36c","title":"Remove orphaned maw-test-agent directory","description":"rm -rf ~/src/maw-test-agent - old workspace location outside project","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-24T15:48:58.606341817Z","created_by":"bob","updated_at":"2026-01-24T15:55:49.859655865Z","closed_at":"2026-01-24T15:55:49.859636900Z","close_reason":"Directory removed","source_repo":".","compaction_level":0,"original_size":0,"labels":["cleanup"]}
{"id":"bd-399","title":"Forget maw-test-agent workspace from jj","description":"jj workspace forget maw-test-agent - workspace registered but directory is outside project","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-24T15:48:59.792230809Z","created_by":"bob","updated_at":"2026-01-24T15:55:37.320428733Z","closed_at":"2026-01-24T15:55:37.320409507Z","close_reason":"Workspace forgotten from jj","source_repo":".","compaction_level":0,"original_size":0,"labels":["cleanup"]}
{"id":"bd-39e","title":"Remove --all flag from merge command","description":"Remove the --all flag from maw ws merge. It's a footgun - blindly grabs every non-default workspace including ones agents may still be working in. Users should explicitly name the workspaces to merge. Update workspace.rs, agents.rs, AGENTS.md, README.md, main.rs, and TUI app.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-28T17:01:02.655879637Z","created_by":"bob","updated_at":"2026-01-28T17:25:34.420567916Z","closed_at":"2026-01-28T17:25:34.420539032Z","close_reason":"Removed --all flag from merge. Users must name workspaces explicitly. Added --force and confirmation prompt for --destroy. Updated all docs, TUI, and templates.","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-39v","title":"Add 'maw ws check-push' command to detect push blockers","description":"Add a command that checks if the current state can be pushed without errors.\n\nChecks:\n- Empty commits in ancestry (jj log -r 'empty() & ::@')\n- Commits without descriptions\n- Whether bookmark needs to be moved before push\n\nOutput:\n- List of issues that would block push\n- Suggested fixes (rebase commands, describe commands)\n- Exit code 0 if ready to push, non-zero if blockers exist\n\nUsage:\n  maw ws check-push\n  maw ws check-push --fix  # Auto-apply fixes if possible\n\nThis prevents the frustrating cycle of 'try push -> fails -> search for solution -> fix -> try again'.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-28T20:21:10.154235820Z","created_by":"bob","updated_at":"2026-01-28T20:31:45.865437555Z","closed_at":"2026-01-28T20:31:45.865408019Z","close_reason":"Won't build a separate command. The right fix is detecting push blockers at merge time, not adding a pre-push diagnostic. Will add empty commit detection to maw ws merge output instead.","source_repo":".","compaction_level":0,"original_size":0,"labels":["agent-ux","cli"]}
{"id":"bd-39z","title":"Document empty workspace commits as intentional in AGENTS.md","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-25T14:09:49.556411767Z","created_by":"bob","updated_at":"2026-01-25T14:10:49.770980867Z","closed_at":"2026-01-25T14:10:49.770958666Z","close_reason":"Done: updated AGENTS.md and generated instructions","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-3ac","title":"Add merge and release workflow to AGENTS.md","description":"Adopt the development workflow pattern from botbus AGENTS.md. Replace the sparse 'Finishing Work' and 'Pushing to Remote' sections with a complete merge-and-release workflow covering: merging workspaces, version bumping, bookmark management, pushing, tagging, and verification. Adapt for maw's workspace-based workflow.","status":"closed","priority":2,"issue_type":"docs","created_at":"2026-01-28T16:59:14.956270277Z","created_by":"bob","updated_at":"2026-01-28T17:00:05.145962838Z","closed_at":"2026-01-28T17:00:05.145934786Z","close_reason":"Replaced Finishing Work + Pushing to Remote with full Merging and Releasing workflow in AGENTS.md","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-3bl","title":"ws create leaves empty intermediate commits in history","description":"When creating a workspace, maw creates empty intermediate commits that clutter the git history.\n\nLooking at 'jj log' after workspace creation and merge:\n\n```\n‚óã  uplpmxlo ... (empty) (no description set)\n‚óã  nvqtyxmr ... (empty) (no description set)\n```\n\nThese appear to be the 'base' commits created when setting up the workspace before the agent does any work.\n\n**Expected behavior:** Either:\n1. These commits should be squashed away during merge, or\n2. They shouldn't be created in the first place (workspace starts with the agent's first real commit)\n\n**Current behavior:** Empty commits remain in history after merge.\n\n**Discovered in:** botcrit multi-agent coordination experiment","status":"closed","priority":3,"issue_type":"bug","created_at":"2026-01-25T14:01:09.576168512Z","created_by":"bob","updated_at":"2026-01-25T14:10:45.667920902Z","closed_at":"2026-01-25T14:10:45.667899953Z","close_reason":"By design: empty commits prevent divergence in multi-agent scenarios. Updated AGENTS.md to explain this is intentional.","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-3ca","title":"TUI: Add mouse support (click, scroll)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T18:59:08.344141351Z","created_by":"bob","updated_at":"2026-01-24T19:04:12.804097525Z","closed_at":"2026-01-24T19:04:12.804076495Z","close_reason":"Added mouse support: click to select panel/item, scroll wheel for navigation","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-3gn","title":"Support agent iteration/revision workflow","description":"Currently no way for tech lead to request changes from agents after review.\n\nNeeded workflow:\n1. Tech lead reviews workspace\n2. Tech lead creates review feedback (via botbus or maw command)\n3. Agent reads feedback and makes changes in their workspace\n4. Tech lead re-reviews\n5. Approve and merge\n\nCould integrate with crit for formal code review, or build simpler feedback mechanism into maw.\n\nRelated to experiment report bd-2kd","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-28T18:40:26.799645805Z","created_by":"bob","updated_at":"2026-01-28T18:57:36.239449041Z","closed_at":"2026-01-28T18:57:36.239419235Z","close_reason":"Already solved by crit ‚Äî crit reviews + threads provide the iteration workflow described here","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-3iu","title":"Clean up alice workspace","description":"jj workspace forget alice && rm -rf .workspaces/alice - workspace is on root commit, not main","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T15:48:57.795054455Z","created_by":"bob","updated_at":"2026-01-24T15:55:30.392044527Z","closed_at":"2026-01-24T15:55:30.392024860Z","close_reason":"Workspace forgotten and directory removed","source_repo":".","compaction_level":0,"original_size":0,"labels":["cleanup"]}
{"id":"bd-3km","title":"Auto-resolve trivial merge conflicts","description":"When merging workspaces, maw could detect and auto-resolve 'trivial' conflicts where both sides added different non-overlapping lines to the same file.\n\nExample: Two agents both add module declarations to the same file:\n```rust\n// Agent 1 adds:\npub mod drift;\n\n// Agent 2 adds:\npub mod context;\n```\n\nThese are semantically independent additions that could be auto-merged (keep both).\n\n**Current behavior:** Merge fails with conflict markers, requiring manual resolution.\n\n**Suggested behavior:** Detect when conflict is 'both added different lines' and auto-resolve by keeping both additions.\n\nThis might be tricky to implement correctly (need to ensure the additions are truly independent), so marking as an enhancement rather than a bug.\n\n**Discovered in:** botcrit multi-agent coordination - drift and context agents both modified src/jj/mod.rs","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-25T14:23:56.294526610Z","created_by":"bob","updated_at":"2026-01-25T14:29:36.049300420Z","closed_at":"2026-01-25T14:29:36.049281785Z","close_reason":"Won't implement: conflict resolution belongs in jj, not maw. 'Trivial' merges are deceptive - order may matter, semantic independence != syntactic. Better fix is coordination (assign non-overlapping files). Current jj status/diff workflow is sufficient for debugging conflicts.","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-3ng","title":"Create maw Rust binary scaffold","description":"Initialize Cargo project, basic CLI structure with clap","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-24T16:04:24.159755241Z","created_by":"bob","updated_at":"2026-01-24T16:06:30.401569944Z","closed_at":"2026-01-24T16:06:30.401548845Z","close_reason":"Cargo project initialized with clap CLI","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-3p1","title":"Implement maw ws sync command","description":"Auto-handle stale workspace: run jj workspace update-stale and show what changed. Reduces friction when main repo changes.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-24T16:12:04.914171783Z","created_by":"bob","updated_at":"2026-01-24T16:14:16.663260891Z","closed_at":"2026-01-24T16:14:16.663243038Z","close_reason":"Implemented sync command for handling stale workspaces","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-3rz","title":"Add agent guidance for jj bookmark workflow in maw workspaces","description":"## Problem\n\nWhen using maw with jj in colocated repos, agents can successfully create workspaces and make commits, but those commits don't end up on the main branch. This prevents pushing to GitHub and causes confusion.\n\n**Symptoms:**\n- Agent creates workspace: `maw ws create agent-1`\n- Agent makes commits with `jj commit` or `jj describe`\n- When coordinator tries to merge: `maw ws merge --all`\n- Commits exist in jj log but aren't on `main` bookmark\n- Git shows detached HEAD or main hasn't moved\n- `git push` has nothing to push\n\n**Root Cause:**\njj creates commits on a \"floating\" working copy, not directly on bookmarks/branches. After committing, you must explicitly move the `main` bookmark to include your commits:\n\n```bash\njj bookmark set main -r @-  # Move main to parent of working copy\n```\n\n## Proposed Solution\n\nUpdate maw's agent documentation (AGENTS.md or generated guidance) to include jj bookmark workflow:\n\n### For Subagents (in workspaces)\n- Workspaces already isolate work, so subagents don't need to worry about bookmarks\n- Their commits get merged by coordinator\n\n### For Coordinator/Main Workspace\nAfter merging workspaces:\n\n```bash\n# After maw ws merge --all\njj bookmark set main -r @-    # Move main to include merged commit\njj git push                    # Push to GitHub\n```\n\n### Documentation Additions\n\n1. **Quick Start section** - Add jj first-time setup:\n   ```bash\n   jj bookmark track main --remote=origin  # One-time setup\n   ```\n\n2. **Workflow examples** - Show full commit-to-push flow:\n   ```bash\n   # Make changes\n   jj commit -m \"message\"\n   jj bookmark set main -r @-\n   jj git push\n   ```\n\n3. **Troubleshooting section** - How to recover if bookmark wasn't moved\n\n## Benefits\n- Agents won't lose work due to bookmark confusion\n- Clear path from workspace merge ‚Üí GitHub push\n- Prevents accumulation of orphaned commits\n- Works consistently across projects using jj + maw\n\n## See Also\n- botbus AGENTS.md has similar guidance (lines 77-129)\n- jj tutorial: https://martinvonz.github.io/jj/latest/bookmarks/","status":"closed","priority":2,"issue_type":"enhancement","created_at":"2026-01-26T20:47:35.489967703Z","created_by":"bob","updated_at":"2026-01-26T20:50:48.324829152Z","closed_at":"2026-01-26T20:50:48.324804786Z","close_reason":"Done: Added 'Pushing to Remote' section to AGENTS.md with bookmark workflow, troubleshooting tips. Updated maw ws merge to show push instructions. Updated generated instructions.","source_repo":".","compaction_level":0,"original_size":0,"labels":["agent-ux","docs"]}
{"id":"bd-3u4","title":"Implement workspace list command","description":"maw workspace list - show all workspaces with status (stale, active, etc)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T16:04:27.331844638Z","created_by":"bob","updated_at":"2026-01-24T16:06:37.825040922Z","closed_at":"2026-01-24T16:06:37.825015134Z","close_reason":"Implemented in initial scaffold","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-3u4","depends_on_id":"bd-3ng","type":"blocks","created_at":"2026-01-24T16:04:32.925293834Z","created_by":"bob","metadata":"{}","thread_id":""}]}
{"id":"bd-9zr","title":"Add agents subcommand to generate AGENTS.md sections","description":"maw agents init - generates/updates AGENTS.md with workspace instructions","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-24T16:04:29.499413538Z","created_by":"bob","updated_at":"2026-01-24T16:08:04.303450365Z","closed_at":"2026-01-24T16:08:04.303424477Z","close_reason":"Implemented agents init/show commands for AGENTS.md generation","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-9zr","depends_on_id":"bd-3ng","type":"blocks","created_at":"2026-01-24T16:04:33.046645641Z","created_by":"bob","metadata":"{}","thread_id":""}]}
{"id":"bd-c6z","title":"TUI: Commits panel","description":"Show jj log as graph. Highlight commits from selected workspace. Graph characters for merges.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T17:32:20.806234482Z","created_by":"bob","updated_at":"2026-01-24T18:31:56.710368461Z","closed_at":"2026-01-24T18:31:56.710350397Z","close_reason":"Implemented commits panel with jj log parsing, status symbols, navigation","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-c6z","depends_on_id":"bd-328","type":"blocks","created_at":"2026-01-24T17:32:29.911860231Z","created_by":"bob","metadata":"{}","thread_id":""}]}
{"id":"bd-clq","title":"Protect default workspace from destroy","description":"maw ws destroy default fails with misleading 'does not exist' because it looks for .workspaces/default/. Add an explicit check: if name == 'default', bail with 'Cannot destroy the default workspace'. Same check needed in merge's destroy_workspaces path.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-28T21:16:30.590875046Z","created_by":"bob","updated_at":"2026-01-28T21:22:21.350469503Z","closed_at":"2026-01-28T21:22:21.350442332Z","close_reason":"v0.5.0: init command, doctor gitignore check, default workspace protection","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-ebr","title":"Auto-sync beads after successful merge","description":"When agents update beads in their workspaces, those changes stay in workspace-local beads files. After merge, need manual 'br sync --flush-only' to export to main repo.\n\nProposed: maw ws merge should optionally run br sync after successful merge.\n\nAdd flag: maw ws merge --sync-beads <agents>\n\nThis would:\n1. Merge workspaces\n2. If successful, run br sync --flush-only  \n3. Show summary of bead changes\n\nRelated to experiment report bd-2kd","status":"closed","priority":3,"issue_type":"enhancement","created_at":"2026-01-28T18:40:28.096289123Z","created_by":"bob","updated_at":"2026-01-28T18:57:42.155395694Z","closed_at":"2026-01-28T18:57:42.155357933Z","close_reason":"Won't fix ‚Äî beads sync is br's concern, not maw's. Adding --sync-beads breaks separation of concerns. Will add a reminder to merge output instead.","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-iq1","title":"Add maw init command","description":"Add 'maw init' that: (1) checks jj is initialized or runs jj init, (2) adds .workspaces/ to .gitignore if not present. This is the first command a user runs in a new project. Currently there's no setup step and agents/users have to manually ensure .workspaces is gitignored.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-28T21:16:30.806415190Z","created_by":"bob","updated_at":"2026-01-28T21:22:21.363483724Z","closed_at":"2026-01-28T21:22:21.363466011Z","close_reason":"v0.5.0: init command, doctor gitignore check, default workspace protection","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-kwi","title":"Document --force flag for ws destroy in AGENTS.md","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-25T14:09:48.768303739Z","created_by":"bob","updated_at":"2026-01-25T14:10:49.296763477Z","closed_at":"2026-01-25T14:10:49.296741917Z","close_reason":"Done: updated AGENTS.md and generated instructions","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-mkr","title":"TUI: Help popup and command log","description":"? key shows help popup with keybindings. Command log panel shows recent jj commands executed.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T17:32:25.512420845Z","created_by":"bob","updated_at":"2026-01-24T18:31:57.991566119Z","closed_at":"2026-01-24T18:31:57.991547664Z","close_reason":"Implemented help popup with keybindings reference","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-mkr","depends_on_id":"bd-328","type":"blocks","created_at":"2026-01-24T17:32:30.348097700Z","created_by":"bob","metadata":"{}","thread_id":""}]}
{"id":"bd-v29","title":"Add automated tests","description":"Unit tests for validation, integration tests for workspace lifecycle. Use temp directories for isolation.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T16:34:59.881944061Z","created_by":"bob","updated_at":"2026-01-24T16:36:14.246623631Z","closed_at":"2026-01-24T16:36:14.246602862Z","close_reason":"Added integration tests for workspace name validation (8 tests)","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-wxu","title":"Add workspace name validation","description":"Critical security: workspace names passed directly to jj and used in paths. Add validation: no path separators, no leading dashes, alphanumeric+hyphen+underscore only.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-24T16:28:44.685262528Z","created_by":"bob","updated_at":"2026-01-24T16:30:08.152290787Z","closed_at":"2026-01-24T16:30:08.152265830Z","close_reason":"Added validate_workspace_name() with checks for empty, leading dash, path separators, and alphanumeric enforcement","source_repo":".","compaction_level":0,"original_size":0}
