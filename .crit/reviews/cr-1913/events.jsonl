{"ts":"2026-02-19T06:46:48.584975866Z","author":"maw-dev/0/onyx-quartz","event":"ReviewCreated","data":{"review_id":"cr-1913","jj_change_id":"poxwquzqmyyxxxlzrtsxwppwsvslyksq","initial_commit":"1a1e045f80730546d8a8d50ab38c944cdd7031a3","title":"bd-2sjg.3: maw init: setup git refs under refs/manifold/","description":"Implements shared git ref management for Manifold's refs/manifold/* namespace.\n\n## Summary\n- Created src/refs.rs with EPOCH_CURRENT constant, read_ref(), write_ref(), write_ref_cas() (atomic CAS), delete_ref(), and convenience wrappers for epoch management\n- Updated v2_init.rs to use shared ref helpers instead of duplicated private functions\n- Implemented list() and status() in GitWorktreeBackend using manifold_refs::read_epoch_current for staleness detection\n- Added parse_worktree_porcelain() and parse_porcelain_status() helpers\n\n## Key Design\n- write_ref_cas() uses 'git update-ref <ref> <new> <old>' which is atomic (git holds a ref lock)\n- CasMismatch error returned when concurrent update detected\n- Zero OID can be used as old_oid to 'create only if not exists'\n- All 182 tests pass\n\n## Testing\n- 16 new tests in refs.rs covering read/write/CAS/delete, concurrent races, and error display\n- 12 new tests in git.rs for list(), status(), parse_worktree_porcelain(), parse_porcelain_status()"}}
{"ts":"2026-02-19T06:46:48.585106882Z","author":"maw-dev/0/onyx-quartz","event":"ReviewersRequested","data":{"review_id":"cr-1913","reviewers":["maw-security"]}}
{"ts":"2026-02-19T06:51:16.824045583Z","author":"maw-dev/0","event":"ReviewersRequested","data":{"review_id":"cr-1913","reviewers":["maw-security"]}}
{"ts":"2026-02-19T07:03:07.821192904Z","author":"maw-dev/0","event":"ReviewersRequested","data":{"review_id":"cr-1913","reviewers":["manifold-security"]}}
{"ts":"2026-02-19T07:04:58.661305881Z","author":"manifold-security","event":"ReviewerVoted","data":{"review_id":"cr-1913","vote":"lgtm","reason":"Security review: no issues found. Command injection prevented by args array (no shell). GitOid/WorkspaceId types enforce strict validation. CAS implementation correctly uses git atomic ref update. No secrets, path traversal, or injection vectors."}}
{"ts":"2026-02-19T07:04:58.676924147Z","author":"manifold-security","event":"ReviewApproved","data":{"review_id":"cr-1913"}}
{"ts":"2026-02-19T07:11:51.150394552Z","author":"maw-dev/0","event":"ReviewMerged","data":{"review_id":"cr-1913","final_commit":"e8b631f58b6e7c966340a22a43bb8f0fbe6e8e20"}}
